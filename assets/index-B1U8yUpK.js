import{r as p,g as D,B as W,s as L,_ as m,f as F,b as T,j as t,d as N,e as A,a as oe,h as se,p as ie,k as le,C as ce,D as pe}from"./index-Btl2Weje.js";import{A as de,V as G,a as J,L as ue}from"./VisibilityOff-CAML1jIo.js";import{L as me,A as he,D as xe}from"./AdapterDayjs-CwaMh83x.js";import{d as re}from"./dayjs.min-m4J77jMM.js";import{c as ve,Z as be}from"./zipcodes-AUSGReFK.js";import{B as R}from"./Box-B8YN9VXr.js";import{c as ae,S as fe}from"./createSvgIcon-DXQKO_ID.js";import{T as B,a as U,I as _,O as K,F as z,S as Q}from"./TextField-BWvgxPc_.js";import{a as X,I as ee}from"./InputAdornment-B4QCH4OE.js";import{B as V}from"./Button-COzyxiyo.js";import{M as Y}from"./MenuItem-C9BB5Np4.js";import"./Typography-CpR3wF3u.js";import"./ButtonBase-BAkVWMT2.js";import"./colorManipulator-DunGrBus.js";import"./Modal-C1ZUpMrU.js";import"./mergeSlotProps-CYvY98bO.js";import"./createStyled-Bc7KwlUh.js";import"./DialogContent-CQc3w5xz.js";import"./react-is.production.min-DUDD-a5e.js";const Se=p.createContext({}),H=Se,ye=p.createContext({}),q=ye;function ge(e){return D("MuiStep",e)}W("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Ce=["active","children","className","component","completed","disabled","expanded","index","last"],Le=e=>{const{classes:r,orientation:n,alternativeLabel:i,completed:l}=e;return A({root:["root",n,i&&"alternativeLabel",l&&"completed"]},ge,r)},je=L("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.root,r[n.orientation],n.alternativeLabel&&r.alternativeLabel,n.completed&&r.completed]}})(({ownerState:e})=>m({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),we=p.forwardRef(function(r,n){const i=F({props:r,name:"MuiStep"}),{active:l,children:o,className:v,component:u="div",completed:s,disabled:h,expanded:x=!1,index:c,last:b}=i,j=T(i,Ce),{activeStep:w,connector:S,alternativeLabel:E,orientation:P,nonLinear:M}=p.useContext(H);let[y=!1,f=!1,g=!1]=[l,s,h];w===c?y=l!==void 0?l:!0:!M&&w>c?f=s!==void 0?s:!0:!M&&w<c&&(g=h!==void 0?h:!0);const I=p.useMemo(()=>({index:c,last:b,expanded:x,icon:c+1,active:y,completed:f,disabled:g}),[c,b,x,y,f,g]),C=m({},i,{active:y,orientation:P,alternativeLabel:E,completed:f,disabled:g,expanded:x,component:u}),a=Le(C),d=t.jsxs(je,m({as:u,className:N(a.root,v),ref:n,ownerState:C},j,{children:[S&&E&&c!==0?S:null,o]}));return t.jsx(q.Provider,{value:I,children:S&&!E&&c!==0?t.jsxs(p.Fragment,{children:[S,d]}):d})}),Ee=we,Pe=ae(t.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Me=ae(t.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ie(e){return D("MuiStepIcon",e)}const ke=W("MuiStepIcon",["root","active","completed","error","text"]),O=ke;var te;const $e=["active","className","completed","error","icon"],Ne=e=>{const{classes:r,active:n,completed:i,error:l}=e;return A({root:["root",n&&"active",i&&"completed",l&&"error"],text:["text"]},Ie,r)},Z=L(fe,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,r)=>r.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${O.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${O.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${O.error}`]:{color:(e.vars||e).palette.error.main}})),Re=L("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,r)=>r.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),ze=p.forwardRef(function(r,n){const i=F({props:r,name:"MuiStepIcon"}),{active:l=!1,className:o,completed:v=!1,error:u=!1,icon:s}=i,h=T(i,$e),x=m({},i,{active:l,completed:v,error:u}),c=Ne(x);if(typeof s=="number"||typeof s=="string"){const b=N(o,c.root);return u?t.jsx(Z,m({as:Me,className:b,ref:n,ownerState:x},h)):v?t.jsx(Z,m({as:Pe,className:b,ref:n,ownerState:x},h)):t.jsxs(Z,m({className:b,ref:n,ownerState:x},h,{children:[te||(te=t.jsx("circle",{cx:"12",cy:"12",r:"12"})),t.jsx(Re,{className:c.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:x,children:s})]}))}return s}),De=ze;function We(e){return D("MuiStepLabel",e)}const Fe=W("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),k=Fe,Te=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Ae=e=>{const{classes:r,orientation:n,active:i,completed:l,error:o,disabled:v,alternativeLabel:u}=e;return A({root:["root",n,o&&"error",v&&"disabled",u&&"alternativeLabel"],label:["label",i&&"active",l&&"completed",o&&"error",v&&"disabled",u&&"alternativeLabel"],iconContainer:["iconContainer",i&&"active",l&&"completed",o&&"error",v&&"disabled",u&&"alternativeLabel"],labelContainer:["labelContainer",u&&"alternativeLabel"]},We,r)},Be=L("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.root,r[n.orientation]]}})(({ownerState:e})=>m({display:"flex",alignItems:"center",[`&.${k.alternativeLabel}`]:{flexDirection:"column"},[`&.${k.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),Ue=L("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,r)=>r.label})(({theme:e})=>m({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${k.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${k.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${k.alternativeLabel}`]:{marginTop:16},[`&.${k.error}`]:{color:(e.vars||e).palette.error.main}})),_e=L("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,r)=>r.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${k.alternativeLabel}`]:{paddingRight:0}})),Ve=L("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,r)=>r.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${k.alternativeLabel}`]:{textAlign:"center"}})),ne=p.forwardRef(function(r,n){var i;const l=F({props:r,name:"MuiStepLabel"}),{children:o,className:v,componentsProps:u={},error:s=!1,icon:h,optional:x,slotProps:c={},StepIconComponent:b,StepIconProps:j}=l,w=T(l,Te),{alternativeLabel:S,orientation:E}=p.useContext(H),{active:P,disabled:M,completed:y,icon:f}=p.useContext(q),g=h||f;let I=b;g&&!I&&(I=De);const C=m({},l,{active:P,alternativeLabel:S,completed:y,disabled:M,error:s,orientation:E}),a=Ae(C),d=(i=c.label)!=null?i:u.label;return t.jsxs(Be,m({className:N(a.root,v),ref:n,ownerState:C},w,{children:[g||I?t.jsx(_e,{className:a.iconContainer,ownerState:C,children:t.jsx(I,m({completed:y,active:P,error:s,icon:g},j))}):null,t.jsxs(Ve,{className:a.labelContainer,ownerState:C,children:[o?t.jsx(Ue,m({ownerState:C},d,{className:N(a.label,d==null?void 0:d.className),children:o})):null,x]})]}))});ne.muiName="StepLabel";const He=ne;function Ye(e){return D("MuiStepConnector",e)}W("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Oe=["className"],Ze=e=>{const{classes:r,orientation:n,alternativeLabel:i,active:l,completed:o,disabled:v}=e,u={root:["root",n,i&&"alternativeLabel",l&&"active",o&&"completed",v&&"disabled"],line:["line",`line${oe(n)}`]};return A(u,Ye,r)},qe=L("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.root,r[n.orientation],n.alternativeLabel&&r.alternativeLabel,n.completed&&r.completed]}})(({ownerState:e})=>m({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),Ge=L("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.line,r[`line${oe(n.orientation)}`]]}})(({ownerState:e,theme:r})=>{const n=r.palette.mode==="light"?r.palette.grey[400]:r.palette.grey[600];return m({display:"block",borderColor:r.vars?r.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),Je=p.forwardRef(function(r,n){const i=F({props:r,name:"MuiStepConnector"}),{className:l}=i,o=T(i,Oe),{alternativeLabel:v,orientation:u="horizontal"}=p.useContext(H),{active:s,disabled:h,completed:x}=p.useContext(q),c=m({},i,{alternativeLabel:v,orientation:u,active:s,completed:x,disabled:h}),b=Ze(c);return t.jsx(qe,m({className:N(b.root,l),ref:n,ownerState:c},o,{children:t.jsx(Ge,{className:b.line,ownerState:c})}))}),Ke=Je;function Qe(e){return D("MuiStepper",e)}W("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const Xe=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],et=e=>{const{orientation:r,alternativeLabel:n,classes:i}=e;return A({root:["root",r,n&&"alternativeLabel"]},Qe,i)},tt=L("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.root,r[n.orientation],n.alternativeLabel&&r.alternativeLabel]}})(({ownerState:e})=>m({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),ot=t.jsx(Ke,{}),rt=p.forwardRef(function(r,n){const i=F({props:r,name:"MuiStepper"}),{activeStep:l=0,alternativeLabel:o=!1,children:v,className:u,component:s="div",connector:h=ot,nonLinear:x=!1,orientation:c="horizontal"}=i,b=T(i,Xe),j=m({},i,{alternativeLabel:o,orientation:c,component:s}),w=et(j),S=p.Children.toArray(v).filter(Boolean),E=S.map((M,y)=>p.cloneElement(M,m({index:y,last:y+1===S.length},M.props))),P=p.useMemo(()=>({activeStep:l,alternativeLabel:o,connector:h,nonLinear:x,orientation:c}),[l,o,h,x,c]);return t.jsx(H.Provider,{value:P,children:t.jsx(tt,m({as:s,ownerState:j,className:N(w.root,u),ref:n},b,{children:E}))})}),at=rt,nt=re(),wt=p.memo(()=>{const e=se(),r=ie(),[n,i]=p.useState(0),l=["輸入信箱及密碼","填寫基本資料"],[o,v]=p.useState({email:"",password:"",checkPassWord:"",name:"",phone:"",birthday:"",country:"",city:"",address:""}),u={emailErr:!1,pwdErr:!1,checkPwdErr:"",nameErr:!1,phoneErr:!1,birthdayErr:!1,countryErr:!1,cityErr:!1,addressErr:!1},[s,h]=p.useState(u),{allErrMsg:x,showFinal:c,isLogin:b}=le(a=>({allErrMsg:a.sign.errMsg,showFinal:a.sign.showFinal,isLogin:a.user.isLogin}));p.useEffect(()=>{b&&r("/home")},[b]);const[j,w]=p.useState(""),[S,E]=p.useState(""),[P,M]=p.useState(""),y=a=>{const d=be.filter($=>$.city===a).map($=>({zipcode:$.zipcode,detail:$.detail,city:$.county}));M(()=>d)},f=(a,d)=>{a==="birthday"&&(d=new Date(d).toLocaleDateString()),v($=>({...$,[a]:d}))},g=a=>a.preventDefault(),I=a=>{if(a.preventDefault(),h(u),!o.email||!o.password||!o.checkPassWord||o.checkPassWord!==o.password){h(d=>({...d,emailErr:!o.email,pwdErr:!o.password,checkPwdErr:o.checkPassWord?o.checkPassWord!==o.password?"密碼不一致，請重新確認":"":"密碼不得為空"}));return}i(d=>d+1)},C=a=>{if(a.preventDefault(),e(ce("")),h(u),!o.name||!o.phone||!o.birthday||!o.address||!o.country||!o.city){h(d=>({...d,nameErr:!o.name,phoneErr:!o.phone,birthdayErr:!o.birthday,addressErr:!o.address,countryErr:!o.country,cityErr:!o.city}));return}e(pe({name:o.name,email:o.email,password:o.password,phone:o.phone,birthday:o.birthday,address:{zipcode:o.city,detail:o.address}}))};return t.jsxs(de,{children:[t.jsx("div",{className:"sideImg"}),t.jsxs("div",{className:"formContent",children:[t.jsxs("p",{className:"subTitle",children:["享樂酒店，誠摯歡迎 ",t.jsx("br",{}),t.jsx("span",{children:l.length===n?"註冊成功":"立即註冊"})]}),l.length!==n&&!c&&t.jsx(R,{sx:{width:"100%",marginBottom:"30px"},children:t.jsx(at,{activeStep:n,alternativeLabel:!0,children:l.map(a=>t.jsx(Ee,{children:t.jsx(He,{children:a})},a))})}),n===0&&!c&&t.jsxs(R,{component:"form",noValidate:!0,autoComplete:"off",display:"flex",flexDirection:"column",gap:2,sx:{m:"auto",width:"80%"},justifyContent:"center",onSubmit:C,children:[t.jsx(B,{id:"signEmail",label:"註冊信箱",variant:"outlined",placeholder:"abc@example.com",maxLength:50,autoComplete:"username",value:o.email,onChange:a=>f("email",a.target.value),error:s.emailErr,helperText:s.emailErr?"信箱不得為空":""}),t.jsxs(U,{variant:"outlined",error:!!s.pwdErr,children:[t.jsx(_,{htmlFor:"signPwd",children:"密碼"}),t.jsx(K,{id:"signPwd",type:j?"text":"password",endAdornment:t.jsx(X,{position:"end",children:t.jsx(ee,{"aria-label":"toggle password visibility",onClick:()=>{w(a=>!a)},onMouseDown:g,children:j?t.jsx(G,{}):t.jsx(J,{})})}),label:"Password",maxLength:50,placeholder:"請輸入8碼以上密碼",autoComplete:"old-password",value:o.password,onChange:a=>f("password",a.target.value)}),s.pwdErr&&t.jsx(z,{error:!0,children:"密碼不得為空"})]}),t.jsxs(U,{variant:"outlined",error:!!s.checkPwdErr,children:[t.jsx(_,{htmlFor:"checkPwd",children:"確認密碼"}),t.jsx(K,{id:"checkPwd",type:S?"text":"password",endAdornment:t.jsx(X,{position:"end",children:t.jsx(ee,{"aria-label":"toggle password visibility",onClick:()=>{E(a=>!a)},onMouseDown:g,children:S?t.jsx(G,{}):t.jsx(J,{})})}),label:"確認密碼",maxLength:50,placeholder:"請輸入8碼以上密碼",autoComplete:"new-password",value:o.checkPassWord,onChange:a=>f("checkPassWord",a.target.value)}),s.checkPwdErr&&t.jsx(z,{error:!0,children:s.checkPwdErr})]}),t.jsx(V,{variant:"outlined",size:"large",type:"submit",button:"primary",color:"primary",onClick:I,children:"下一步"})]}),n===1&&!c&&t.jsxs(R,{component:"form",noValidate:!0,autoComplete:"off",display:"flex",flexDirection:"column",gap:2,sx:{m:"auto",width:"80%"},justifyContent:"center",onSubmit:C,children:[t.jsx(B,{id:"name",label:"姓名",variant:"outlined",placeholder:"陳大明",maxLength:50,value:o.name,onChange:a=>f("name",a.target.value),error:s.nameErr,helperText:s.nameErr?"姓名不得為空":""}),t.jsx(B,{id:"phone",label:"手機",variant:"outlined",placeholder:"0912345678",maxLength:10,value:o.phone,onChange:a=>f("phone",a.target.value),error:s.phoneErr,helperText:s.phoneErr?"手機不得為空":""}),t.jsx(me,{dateAdapter:he,adapterLocale:"zh-tw",children:t.jsx(xe,{label:"生日",format:"YYYY/MM/DD",maxDate:nt,minDate:re("1911-01-01"),slotProps:{textField:{helperText:s.birthdayErr?"生日不得為空":"",error:s.birthdayErr}},onChange:a=>f("birthday",a)})}),t.jsxs(R,{display:"flex",gap:2,children:[t.jsxs(U,{sx:{flex:1},error:!!s.countryErr,children:[t.jsx(_,{id:"country",children:"行政區"}),t.jsx(Q,{labelId:"country",id:"country",value:o.country,onChange:a=>{f("country",a.target.value),y(a.target.value)},autoWidth:!0,label:"行政區",children:ve.map((a,d)=>t.jsx(Y,{value:a,children:a},d))}),s.countryErr&&t.jsx(z,{children:"行政區不得為空"})]}),t.jsxs(U,{sx:{flex:1},error:!!s.cityErr,children:[t.jsx(_,{id:"city",children:"鄉鎮"}),t.jsxs(Q,{labelId:"city",id:"city",value:o.city,onChange:a=>f("city",a.target.value),autoWidth:!0,label:"鄉鎮",children:[t.jsx(Y,{value:"0",disabled:!0,children:"請先選擇行政區"},"none"),P&&P.map((a,d)=>t.jsx(Y,{value:a.zipcode,children:a.city},d))]}),s.cityErr&&t.jsx(z,{children:"鄉鎮不得為空"})]})]}),t.jsx(B,{id:"address",variant:"outlined",placeholder:"請輸入詳細地址",value:o.address,onChange:a=>f("address",a.target.value.toString()),error:s.addressErr,helperText:s.addressErr?"地址不得為空":""}),x&&t.jsxs(z,{className:"allErrMsg",error:!0,children:["請重新確認：",x]}),t.jsxs(R,{display:"flex",justifyContent:" space-between",children:[t.jsx(V,{variant:"outlined",size:"large",type:"submit",button:"primary",color:"primary",onClick:a=>{a.preventDefault(),i(d=>d-1)},children:"上一步"}),t.jsx(V,{variant:"contained",size:"large",type:"submit",button:"primary",color:"primary",children:"完成註冊"})]})]}),!c&&t.jsxs("p",{className:"regLink",children:["已有會員嗎?",t.jsx(ue,{href:"#/login",children:"前往登入"})]}),c&&t.jsx(V,{sx:{display:"block",m:"0 auto",width:"80%",lineHeight:"30px",textAlign:"center"},variant:"contained",href:"#/login",children:"前往登入"})]})]})});export{wt as default};
